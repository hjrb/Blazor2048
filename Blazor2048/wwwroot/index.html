<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Blazor2048</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="Blazor2048.styles.css" rel="stylesheet" />
    <link href="manifest.json" rel="manifest" />
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png" />
</head>

<body>
    <div id="app">Loading...</div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">🗙</a>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>
    <script>navigator.serviceWorker.register('service-worker.js');</script>
<script type="text/javascript">
        // register a document event hanlder for key down
        (function () {
            console.log("Registering keydown event handler");
            document.addEventListener('keydown', function (e) {
                // call the assembly method HandleKeyPress
                console.log("Calling HandleKeyPress");
                DotNet.invokeMethodAsync('Blazor2048', 'HandleKeyPress', serializeEvent(e));
            }, false);
        })();
        // that is supposingly required...
        var serializeEvent = function (e) {
            if (e) {
                let o = {
                    altKey: e.altKey,
                    button: e.button,
                    buttons: e.buttons,
                    code: e.code,
                    clientX: e.clientX,
                    clientY: e.clientY,
                    ctrlKey: e.ctrlKey,
                    metaKey: e.metaKey,
                    movementX: e.movementX,
                    movementY: e.movementY,
                    offsetX: e.offsetX,
                    offsetY: e.offsetY,
                    pageX: e.pageX,
                    pageY: e.pageY,
                    screenX: e.screenX,
                    screenY: e.screenY,
                    shiftKey: e.shiftKey
                };
                return o;
            }
        };
    </script>

</body>

</html>
